<div class="add-idea-container glass fade-in">

  <!-- Header -->
  <div class="form-header">
    <div class="form-icon">ğŸ’¡</div>
    <div>
      <h2 class="form-title">Ajouter une nouvelle idÃ©e</h2>
      <p class="form-subtitle">
        Partagez une idÃ©e claire pour la soumettre Ã  la communautÃ©
      </p>
    </div>
  </div>

  <form [formGroup]="ideaForm" (ngSubmit)="submitIdea()" class="idea-form">

    <!-- Error Message -->
    <div class="error-message" *ngIf="errorMessage">
      âŒ {{ errorMessage }}
    </div>

    <!-- Titre -->
    <div class="form-group">
      <label>Titre</label>
      <input
        class="apple-input"
        type="text"
        formControlName="title"
        placeholder="Titre de l'idÃ©e"
      />
    </div>

    <!-- Description -->
    <div class="form-group">
      <label>Description</label>
      <textarea
        class="apple-input"
        formControlName="description"
        placeholder="DÃ©crivez votre idÃ©e"
        rows="5">
      </textarea>
    </div>

    <!-- Categorie -->
    <div class="form-group">
      <label>CatÃ©gorie</label>
      <select class="apple-input" formControlName="category">
        <option>GÃ©nÃ©ral</option>
        <option>Innovation</option>
        <option>Projet</option>
        <option>Autre</option>
      </select>
    </div>


    <!-- Image -->
    <div class="form-group">
      <label>Image de couverture (optionnel)</label>

      <label class="file-upload">
        <input
          type="file"
          (change)="onFileSelected($event)"
          accept="image/*"
        />
        <span>ğŸ“· Choisir une image</span>
      </label>

      <p class="text-xs text-[var(--text-muted)]">Formats: JPG/PNG/WebP</p>

      <div class="image-preview" *ngIf="imagePreview">
        <img [src]="imagePreview" alt="Preview" />
        <button type="button" class="remove-btn" (click)="imagePreview = null; imageFile = null" style="position:absolute; right:12px; top:12px;">âœ•</button>
      </div>
    </div>

    <!-- Attachments -->
    <div class="form-group">
      <label>Attachements (fichiers supplÃ©mentaires)</label>

      <label class="file-upload">
        <input
          type="file"
          (change)="onAttachmentSelected($event)"
          accept="*"
          multiple
        />
        <span>ğŸ“ Ajouter des fichiers</span>
      </label>

      <p class="text-xs text-[var(--text-muted)]">Vous pouvez joindre plusieurs fichiers (PDF, DOCX, images, etc.)</p>

      <div class="attachments-list" *ngIf="attachments.length > 0">
        <div class="attachment-item" *ngFor="let att of attachments; let i = index">
          <span class="file-icon">ğŸ“„</span>
          <span class="file-name">{{ att.name }}</span>
          <button type="button" class="remove-btn" (click)="removeAttachment(i)">âœ•</button>
        </div>
      </div>
    </div>

    <!-- PrioritÃ© -->
    <div class="form-group">
      <label>PrioritÃ©</label>
      <select class="apple-input" formControlName="priority">
        <option>Haute</option>
        <option>Moyenne</option>
        <option>Basse</option>
      </select>
    </div>

    <!-- Submit -->
    <div class="form-actions">
      <button
        type="submit"
        class="apple-button"
        [disabled]="ideaForm.invalid || isSubmitting">
        {{ isSubmitting ? 'CrÃ©ation...' : 'Ajouter l\'idÃ©e' }}
      </button>
    </div>

  </form>
</div>
