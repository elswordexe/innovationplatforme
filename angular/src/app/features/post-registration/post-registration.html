<div class="min-h-screen bg-gradient-to-br from-white via-[var(--brand-soft)] to-white flex items-center justify-center px-6 py-12">
  <div class="w-full max-w-md glass rounded-3xl p-10 md:p-12 fade-in">
    
    <!-- Step 1: Choose action -->
    <div *ngIf="showStep1" class="space-y-5">
      <h2 class="text-2xl font-semibold tracking-tight">Bienvenue sur PinBoard!</h2>
      <p class="text-[var(--text-sub)]">Voulez-vous rejoindre un groupe ou inviter des personnes?</p>

      <button (click)="selectJoin()" type="button" class="apple-input w-full text-left font-medium hover:bg-opacity-80 p-4 rounded-lg border-2 border-transparent hover:border-[var(--brand)]">
        <div class="font-semibold">üìç Rejoindre un groupe</div>
        <div class="text-sm text-[var(--text-sub)] font-normal mt-1">Entrez un code SSO pour rejoindre une startup ou organisation</div>
      </button>

      <button (click)="selectInvite()" type="button" class="apple-input w-full text-left font-medium hover:bg-opacity-80 p-4 rounded-lg border-2 border-transparent hover:border-[var(--brand)]">
        <div class="font-semibold">üë• Inviter des personnes</div>
        <div class="text-sm text-[var(--text-sub)] font-normal mt-1">Invitez des collaborateurs √† rejoindre votre √©quipe</div>
      </button>

      <button (click)="skipStep()" type="button" class="apple-button-secondary w-full mt-4">
        Continuer sans action
      </button>
    </div>

    <!-- Step 2: Join Group Form -->
    <div *ngIf="showJoinForm" class="space-y-5">
      <h2 class="text-2xl font-semibold tracking-tight">Rejoindre un groupe</h2>
      <p class="text-[var(--text-sub)]">Entrez le code SSO fourni par votre organisation</p>

      <div *ngIf="errorMessage" class="p-4 bg-red-50 border border-red-200 rounded-lg text-red-700">
        {{ errorMessage }}
      </div>
      <div *ngIf="successMessage" class="p-4 bg-green-50 border border-green-200 rounded-lg text-green-700">
        {{ successMessage }}
      </div>

      <input 
        [(ngModel)]="joinCode" 
        class="apple-input w-full tracking-widest uppercase" 
        type="text" 
        placeholder="Ex: ABC123" 
        maxlength="6"
        [disabled]="loading"
      />

      <button 
        (click)="joinGroup()" 
        [disabled]="loading || !joinCode.trim()" 
        type="button" 
        class="apple-button w-full flex items-center justify-center gap-2"
      >
        <span *ngIf="loading" class="animate-spin">‚è≥</span>
        {{ loading ? 'V√©rification en cours...' : 'Rejoindre' }}
      </button>

      <button 
        *ngIf="loading"
        (click)="cancelVerification()" 
        type="button" 
        class="apple-button-secondary w-full flex items-center justify-center gap-2"
      >
        <span>‚ùå</span>
        Annuler la v√©rification
      </button>

      <button 
        *ngIf="!loading"
        (click)="goBack()" 
        type="button" 
        class="apple-button-secondary w-full"
      >
        Retour
      </button>
    </div>

    <!-- Step 3: Invite Form -->
    <div *ngIf="showInviteForm" class="space-y-5">
      <h2 class="text-2xl font-semibold tracking-tight">Inviter des personnes</h2>
      <p class="text-[var(--text-sub)]">Envoyez une invitation √† vos collaborateurs</p>

      <div *ngIf="errorMessage" class="p-4 bg-red-50 border border-red-200 rounded-lg text-red-700">
        {{ errorMessage }}
      </div>
      <div *ngIf="successMessage" class="p-4 bg-green-50 border border-green-200 rounded-lg text-green-700">
        {{ successMessage }}
      </div>

      <input 
        [(ngModel)]="inviteEmail" 
        class="apple-input w-full" 
        type="email" 
        placeholder="Adresse email" 
        [disabled]="loading"
      />

      <button 
        (click)="sendInvite()" 
        [disabled]="loading || !inviteEmail.trim()" 
        type="button" 
        class="apple-button w-full"
      >
        {{ loading ? 'Envoi...' : 'Envoyer invitation' }}
      </button>

      <button 
        (click)="goBack()" 
        [disabled]="loading"
        type="button" 
        class="apple-button-secondary w-full"
      >
        Retour
      </button>
    </div>

  </div>
</div>
